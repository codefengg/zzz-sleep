<!-- components/play-panel/play-panel.wxml -->
<movable-area class="panel-area">
  <movable-view 
    class="panel-wrapper"
    bindchange="onPanelChange" 
    bindtouchend="dragPanelEnd" 
    bindtouchstart="dragPanelStart"
    direction="vertical" 
    damping="40" 
    friction="1" 
    inertia="{{false}}" 
    outOfBounds="{{false}}" 
    x="0" 
    y="{{panelPosition}}"
    style="background-color: {{backgroundColor}}; {{customStyle}}"
  >
    <!-- 顶部下拉提示条 -->
    <view class="drag-handle {{isExpanded ? 'expanded' : ''}}" catchtap="togglePanel">
      <view class="drag-bar"></view>
    </view>
    
    <!-- 面板内容区 -->
    <view class="panel-content">
      <!-- 迷你播放器内容 -->
      <view class="mini-player" hidden="{{isExpanded}}">
        <slot></slot>
      </view>
      
      <!-- 中间过渡层 - 只在拖动过程中显示 -->
      <block wx:if="{{isDragging}}">
        <!-- 迷你播放器淡出层 -->
        <view class="mini-player transition-layer" style="opacity: {{1 - presentProgress}};">
          <slot></slot>
        </view>
        
        <!-- 全屏播放器淡入层 -->
        <view class="full-player transition-layer" style="opacity: {{presentProgress}};">
          <slot name="full-player"></slot>
        </view>
      </block>
      
      <!-- 展开后的播放器内容 -->
      <view class="full-player" hidden="{{!isExpanded}}">
        <slot name="full-player"></slot>
      </view>
    </view>
  </movable-view>
</movable-area> 